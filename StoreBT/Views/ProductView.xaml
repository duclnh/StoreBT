<UserControl x:Class="StoreBT.Views.ProductView"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="#f9fafb">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <!-- ==================== HEADER BAR ==================== -->
        <Grid Margin="25,15,25,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <!-- 🔙 Nút quay lại -->
            <Button Grid.Column="0"
                        Width="100"
                        Height="36"
                        Padding="10,0"
                        Background="#EFF6FF"
                        Foreground="#1D4ED8"
                        BorderBrush="#BFDBFE"
                        BorderThickness="1"
                        Cursor="Hand"
                        Click="Back_Click">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE72B;" FontSize="14" Margin="0,0,5,0"/>
                    <TextBlock Text="Quay lại"/>
                </StackPanel>
            </Button>
            <!-- 🏷️ Tiêu đề -->
            <TextBlock Grid.Column="1"
                           Text="📦  Quản lý sản phẩm"
                           FontSize="20"
                           FontWeight="Bold"
                           Foreground="#1E3A8A"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"/>
            <!-- ➕ Nút thêm mới -->
            <Button Grid.Column="2"
                        Width="120"
                        Height="36"
                        Background="#2563EB"
                        Foreground="White"
                        BorderBrush="#1E40AF"
                        BorderThickness="1"
                        Cursor="Hand"
                        Click="AddProduct_Click">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                    <TextBlock FontFamily="Segoe MDL2 Assets" Text="&#xE710;" FontSize="14" Margin="0,0,5,0"/>
                    <TextBlock Text="Thêm mới"/>
                </StackPanel>
            </Button>
        </Grid>
        <!-- ==================== DANH SÁCH SẢN PHẨM ==================== -->
        <DataGrid Grid.Row="1"
                  AutoGenerateColumns="False"
                  HeadersVisibility="Column"
                  CanUserAddRows="False"
                  RowHeight="40"
                  ColumnHeaderHeight="40"
                  Background="White"
                  BorderBrush="#E2E8F0"
                  AlternatingRowBackground="#F8FAFC"
                  SelectionMode="Single"
                  FontSize="14"
                  IsReadOnly="True"
                  x:Name="ProductGrid"
                  Margin="0,20,0,0">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Mã vạch" Binding="{Binding Barcode}" Width="120"/>
                <DataGridTextColumn Header="Tên sản phẩm" Binding="{Binding Name}" Width="2*"/>
                <DataGridTextColumn Header="Loại" Binding="{Binding Category}" Width="150"/>
                <DataGridTextColumn Header="Giá bán" Binding="{Binding Price, StringFormat={}{0:N0} ₫}" Width="120"/>
                <DataGridTextColumn Header="Tồn kho" Binding="{Binding Stock}" Width="100"/>
                <DataGridTextColumn Header="Ngày tạo" Binding="{Binding CreatedAt, StringFormat={}{0:dd/MM/yyyy}}" Width="150"/>
            </DataGrid.Columns>
        </DataGrid>
        <Grid x:Name="PopupOverlay"
          Background="#80000000"
          Visibility="Collapsed"
          Grid.RowSpan="2">
            <Border Background="White"
                CornerRadius="12"
                Padding="20"
                Width="500"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
                <StackPanel>
                    <TextBlock Text="🆕 Thêm sản phẩm" 
                           FontSize="18" 
                           FontWeight="Bold" 
                           Foreground="#1E3A8A"
                           Margin="0,0,0,10"
                           HorizontalAlignment="Center"/>
                    <StackPanel Margin="0,10,0,0">
                        <StackPanel Margin="0,5">
                            <TextBlock Text="Mã vạch" 
                               FontWeight="SemiBold" 
                               Foreground="#1E3A8A"
                               Margin="0,0,0,4"/>
                            <!-- Mã vạch có icon quét -->
                            <Border CornerRadius="8"
                                BorderBrush="#CBD5E1"
                                BorderThickness="1"
                                Background="White"
                                Margin="0,5">
                                <Grid>
                                    <!-- Ô nhập mã vạch -->
                                    <TextBox Style="{StaticResource PlaceholderTextBox}"
                                             x:Name="txtBarcode"
                                             Tag="Mã vạch"
                                             BorderThickness="1"
                                             BorderBrush="#E5E7EB"
                                             Padding="10,8,40,8"
                                             />

                                    <!-- Nút quét mã vạch -->
                                    <Button x:Name="btnScanBarcode"
                                        Width="28"
                                        Height="28"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Center"
                                        Margin="0,0,8,0"
                                        Background="Transparent"
                                        BorderBrush="{x:Null}"
                                        Cursor="Hand"
                                        ToolTip="Quét mã vạch"
                                        Click="btnScanBarcode_Click">
                                        <Image Source="../Assets/Icons/scan.png"
                                           Width="26"
                                           Height="16"
                                           Stretch="Uniform"
                                           VerticalAlignment="Center"
                                           HorizontalAlignment="Center"/>
                                    </Button>
                                </Grid>
                            </Border>
                        </StackPanel>
                        <!-- 🔹 Tên sản phẩm -->
                        <StackPanel Margin="0,5">
                            <TextBlock Text="Tên sản phẩm" 
                   FontWeight="SemiBold" 
                   Foreground="#1E3A8A"
                   Margin="0,0,0,4"/>
                            <TextBox Style="{StaticResource PlaceholderTextBox}" 
                 x:Name="txtName" Tag="Nhập tên sản phẩm" Padding="10"/>
                        </StackPanel>
                        <!-- 🔹 Loại sản phẩm -->
                        <StackPanel Margin="0,5">
                            <TextBlock Text="Loại sản phẩm" 
                   FontWeight="SemiBold" 
                   Foreground="#1E3A8A"
                   Margin="0,0,0,4"/>
                            <TextBox Style="{StaticResource PlaceholderTextBox}" 
                 x:Name="txtCategory" Tag="Nhập loại sản phẩm" Padding="10"/>
                        </StackPanel>
                        <!-- 🔹 Mã vạch -->
                        <!-- 🔹 Giá bán -->
                        <StackPanel Margin="0,5">
                            <TextBlock Text="Giá bán" 
                   FontWeight="SemiBold" 
                   Foreground="#1E3A8A"
                   Margin="0,0,0,4"/>
                            <TextBox Style="{StaticResource PlaceholderTextBox}" 
                 x:Name="txtPrice" Tag="Nhập giá bán" Padding="10"/>
                        </StackPanel>
                        <!-- 🔹 Tồn kho -->
                        <StackPanel Margin="0,5">
                            <TextBlock Text="Tồn kho" 
                   FontWeight="SemiBold" 
                   Foreground="#1E3A8A"
                   Margin="0,0,0,4"/>
                            <TextBox Style="{StaticResource PlaceholderTextBox}" 
                 x:Name="txtStock" Tag="Nhập số lượng tồn" Padding="10"/>
                        </StackPanel>
                        <!-- 🔹 Mô tả -->
                        <StackPanel Margin="0,5">
                            <TextBlock Text="Mô tả" 
                   FontWeight="SemiBold" 
                   Foreground="#1E3A8A"
                   Margin="0,0,0,4"/>
                            <TextBox Style="{StaticResource PlaceholderTextBox}" 
                 x:Name="txtDescription" Tag="Thêm mô tả sản phẩm"
                 Padding="10" Height="60" TextWrapping="Wrap" AcceptsReturn="True"/>
                        </StackPanel>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
                        <Button  Padding="10" Content="Hủy" Width="80" Margin="0,0,10,0"
                            Background="White"
                            Click="CancelPopup_Click"/>
                        <Button  Padding="10" Content="Lưu" Width="80"
                            Background="#1E40AF" Foreground="White"
                            Click="SaveProduct_Click"/>
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>
